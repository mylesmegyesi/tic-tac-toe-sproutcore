SC.EmptyTheme=SC.BaseTheme.create({name:"sc-empty"});SC.Theme.addTheme(SC.EmptyTheme);if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat(["__s38_0","__s38_1","__s38_2","__s38_3","__s38_4","__s38_5","__s38_6","__s38_7","__s38_8","__s38_9","__s38_10","__s38_11","__s39_12","__s39_13","__s39_14","__s39_15","__s39_16","__s39_17","__s39_18","__s39_19","__s39_20","__s39_21","__s39_22","__s39_23","__s39_24","__s39_25","__s39_26","__s39_27","__s39_28","__s39_29","__s39_30","__s39_31","__s39_32","__s39_33","__s39_34","__s39_35","__s39_36","__s39_37","__s39_38","__s39_39","__s40_40","__s40_41","__s40_42","__s40_43","__s40_44","__s40_45","__s40_46","__s40_47","__s40_48","__s40_49","__s40_50","__s40_51","__s40_52","__s40_53","__s40_54","__s40_55","__s40_56","__s40_57","__s40_58","__s40_59","__s41_60","__s41_61","__s41_62","__s41_63","__s41_64","__s41_65","__s41_66","__s41_67","__s41_68","__s41_69","__s41_70","__s41_71","__s43_72","__s43_73","__s43_74","__s43_75","__s43_76","__s43_77","__s43_78","__s43_79","__s43_80","__s43_81","__s43_82","__s43_83","__s43_84","__s43_85","__s43_86","__s43_87","__s43_88","__s43_89","__s43_90","__s43_91","__s43_92","__s43_93","__s43_94","__s43_95","__s43_96","__s43_97","__s43_98","__s43_99","__s44_100","__s44_101","__s44_102","__s44_103","__s44_104","__s44_105","__s44_106","__s44_107","__s44_108","__s44_109","__s44_110","__s44_111","__s44_112","__s44_113","__s44_114","__s44_115","__s44_116","__s44_117","__s44_118","__s44_119","__s46_120","__s46_121","__s46_122","__s46_123","__s46_124","__s46_125","__s47_126","__s47_127","__s47_128","__s47_129","__s47_130","__s47_131","__s48_132","__s48_133","__s48_134","__s48_135","__s48_136","__s48_137","__s52_138","__s53_139","__s53_140","__s53_141","__s53_142","__s58_143","__s58_144","__s58_145","__s58_146","__s58_147","__s58_148","__s58_149","__s58_150","__s58_151","__s58_152","__s58_153","__s58_154","__s58_155","__s58_156","__s60_157","__s60_158","__s60_159","__s60_160","__s60_161","__s60_162","__s60_163","__s60_164","__s60_165","__s61_166","__s61_167","__s61_168","__s61_169","__s61_170","__s61_171","__s61_172","__s61_173","__s61_174","__s61_175","__s61_176","__s61_177","__s61_178","__s62_179","__s62_180","__s62_181","__s62_182","__s62_183","__s62_184","__s62_185","__s62_186","__s62_187","__s62_188","__s62_189","__s62_190","__s62_191","__s62_192","__s62_193","__s62_194","__s62_195","__s62_196","__s62_197","__s62_198","__s62_199","__s62_200","__s62_201","__s62_202","__s62_203","__s62_204","__s63_205","__s63_206","__s63_207","__s63_208","__s63_209","__s63_210","__s64_211","__s64_212","__s64_213","__s64_214","__s64_215","__s64_216","__s65_217","__s65_218","__s65_219","__s65_220","__s65_221","__s65_222","__s65_223","__s65_224","__s65_225","__s67_226","__s67_227","__s67_228","__s67_229","__s67_230","__s67_231","__s67_232","__s67_233","__s67_234","__s69_235","__s69_236","__s69_237","__s69_238","__s69_239","__s69_240","__s69_241","__s69_242","__s69_243","__s69_244","__s69_245","__s69_246","__s69_247","__s69_248","__s69_249","__s69_250","__s69_251","__s69_252","__s69_253","__s69_254","__s70_255","__s70_256","__s70_257","__s70_258","__s70_259","__s70_260","__s70_261","__s70_262","__s70_263","__s70_264","__s70_265","__s70_266","__s70_267","__s70_268","__s70_269","__s70_270","__s70_271","__s70_272","__s70_273","__s70_274","__s71_275","__s71_276","__s71_277","__s71_278","__s71_279","__s71_280","__s71_281","__s71_282","__s71_283","__s71_284","__s71_285","__s71_286","__s71_287","__s71_288","__s71_289","__s71_290","__s71_291","__s71_292","__s71_293","__s71_294","__s72_295","__s72_296","__s72_297","__s72_298","__s72_299","__s72_300","__s72_301","__s72_302","__s72_303","__s72_304","__s72_305","__s72_306","__s72_307","__s72_308","__s72_309","__s72_310","__s72_311","__s72_312","__s72_313","__s72_314","__s74_315","__s74_316","__s74_317","__s74_318","__s74_319","__s75_320","__s75_321","__s76_322","__s76_323","__s76_324","__s76_325","__s76_326","__s80_327"]);SC.AceTheme=SC.BaseTheme.create({name:"ace",description:"A SproutCore built-in theme by Alex Iskander and contributors. Only supports browsers that implement CSS3."});SC.Theme.addTheme(SC.AceTheme);SC.AceTheme.PointLeft=SC.AceTheme.subtheme("point-left","point-left");SC.AceTheme.PointRight=SC.AceTheme.subtheme("point-right","point-right");SC.AceTheme.Capsule=SC.AceTheme.subtheme("capsule","capsule");SC.AceTheme.Dark=SC.AceTheme.subtheme("dark");SC.defaultTheme="ace";sc_require("theme");SC.AceTheme.Dark.PointLeft=SC.AceTheme.Dark.subtheme("point-left","point-left");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("point-right","point-right");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("capsule","capsule");SC.AceTheme.SourceList=SC.AceTheme.subtheme("source-list");sc_require("theme");SC.AceTheme.Popover=SC.AceTheme.Dark.subtheme("popover");SC.AceTheme.addTheme(SC.AceTheme.Popover);SC.AceTheme.SolidPopover=SC.AceTheme.Popover.subtheme("solid");SC.AceTheme.addTheme(SC.AceTheme.SolidPopover.create({name:"solid-popover"}));sc_require("resources/picker/popover/popover");SC.AceTheme.Popover.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(e,b){var a=e.get("preferType");var d=e.get("pointerPos");var c=e.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){b.addClass(d)}},update:function(e,d){var a=e.get("preferType");var c=e.get("pointerPos");var b=e.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){d.addClass(c)}}});SC.AceTheme.Popover.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")});a=a.begin("div").addClass("popover-background");this.includeSlices(b,a,SC.NINE_SLICE);a.push("<div class = 'sc-pointer'></div>");a=a.end()},update:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")})}});Tictactoe=SC.Application.create({NAMESPACE:"Tictactoe"});if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);Tictactoe.PlayerSymbols={User:"X",Computer:"O"};Tictactoe.GameState={Playing:0,UserWon:1,ComputerWon:2,Draw:3};sc_require("models/game_state");Tictactoe.GameHelper=SC.Object.extend({gameState:function(a){if(this.checkIfPlayerWon(a,Tictactoe.PlayerSymbols.User)){return Tictactoe.GameState.UserWon}else{if(this.checkIfPlayerWon(a,Tictactoe.PlayerSymbols.Computer)){return Tictactoe.GameState.ComputerWon}else{if(this.boardIsFull(a)){return Tictactoe.GameState.Draw}}}return Tictactoe.GameState.Playing},checkIfPlayerWon:function(a,b){return((a[0]==b&&a[1]==b&&a[2]==b)||(a[3]==b&&a[4]==b&&a[5]==b)||(a[6]==b&&a[7]==b&&a[8]==b)||(a[0]==b&&a[3]==b&&a[6]==b)||(a[1]==b&&a[4]==b&&a[7]==b)||(a[2]==b&&a[5]==b&&a[8]==b)||(a[0]==b&&a[4]==b&&a[8]==b)||(a[2]==b&&a[4]==b&&a[6]==b))},boardIsFull:function(b){for(var a=0;a<9;a++){if(b[a]===null){return false}}return true}});sc_require("helpers/game_helper");Tictactoe.Computer=SC.Object.extend({helper:Tictactoe.GameHelper.create(),getNextMove:function(a,b){$.ajax({url:"http://tictactoeserver.herokuapp.com/get-move",data:{board:JSON.stringify(a.get("values")),player:Tictactoe.PlayerSymbols.Computer},dataType:"jsonp",crossDomain:true,success:function(e,f,d){var c=parseInt(e,10);a.setIndex(c,Tictactoe.PlayerSymbols.Computer)}})}});Tictactoe.Square=SC.Object.extend({value:null});sc_require("models/square_model");Tictactoe.Board=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);this._array=[];for(var a=0;a<9;a++){this._array.pushObject(Tictactoe.Square.create())}this.toggleBoardObservers()},boardObserversOn:true,moveCount:0,toggleBoardObservers:function(){if(this.get("boardObserversOn")){this.turnOnObservers()}else{this.turnOffObservers()}}.observes("boardObserversOn"),turnOnObservers:function(){for(var a=0;a<9;a++){this._array[a].addObserver("value",this,this.boardChanged)}},turnOffObservers:function(){for(var a=0;a<9;a++){this._array[a].removeObserver("value",this,this.boardChanged)}},boardChanged:function(){this.set("moveCount",this.get("moveCount")+1)},setIndex:function(a,b){this._array[a].set("value",b)},getIndex:function(a){return this._array[a].get("value")},squares:function(){return this._array}.property(),values:function(){var a=[];for(var b=0;b<9;b++){a[b]=this.getIndex(b)}return a}.property(),copy:function(){var a=this.copyWithoutObservers();a.set("boardObserversOn",true);return a},copyWithoutObservers:function(){var b=Tictactoe.Board.create({boardObserversOn:false});for(var a=0;a<9;a++){b.setIndex(a,this._array[a].get("value"))}return b},reset:function(){var b=this.get("boardObserversOn");if(b){this.turnOffObservers()}for(var a=0;a<9;a++){this.setIndex(a,null)}this.set("moveCount",0);if(b){this.turnOnObservers()}}});sc_require("models/player_symbols");sc_require("models/computer_model");sc_require("models/square_model");sc_require("models/board_model");sc_require("models/game_state");sc_require("helpers/game_helper");Tictactoe.GameController=SC.ObjectController.create({board:Tictactoe.Board.create(),computer:Tictactoe.Computer.create(),gameHelper:Tictactoe.GameHelper.create(),isUsersTurn:function(){var a=this.board.get("moveCount");return(a%2)===0}.property("board.moveCount").cacheable(),gameState:function(){return this.gameHelper.gameState(this.board.get("values"))}.property("isUsersTurn").cacheable(),userMove:function(d){var b=d.get("value");var c=this.get("isUsersTurn");var a=this.get("gameState")!=Tictactoe.GameState.Playing;if(d.get("value")!==null||!this.get("isUsersTurn")||this.get("gameState")!=Tictactoe.GameState.Playing){return}d.set("value",Tictactoe.PlayerSymbols.User)},computerMove:function(){if(this.get("isUsersTurn")||this.get("gameState")!=Tictactoe.GameState.Playing){return}this.computer.getNextMove(this.board)}.observes("isUsersTurn")});Tictactoe.Theme=SC.AceTheme.create({name:"tictactoe"});SC.Theme.addTheme(Tictactoe.Theme);SC.defaultTheme="tictactoe";Tictactoe.SquareView=SC.LabelView.extend({classNames:["squareView"],click:function(){Tictactoe.GameController.userMove(this.get("content"))},value:function(){var a=this.get("content").value;return(a?a:"")}.property("content.value").cacheable()});sc_require("views/square_view");Tictactoe.BoardView=SC.GridView.extend({classNames:["boardView"],isSelectable:false,columnWidth:100,rowHeight:100,layout:{centerX:0,centerY:0,width:325,height:300},exampleView:Tictactoe.SquareView,contentBinding:"Tictactoe.GameController.board.squares"});Tictactoe.GameView=SC.LabelView.extend({classNames:["gameView"],contentBinding:"Tictactoe.GameController.board.moveCount",value:function(){if(Tictactoe.GameController.board.get("moveCount")===0){return"You're turn first! Click on a sqaure to move!"}var a=Tictactoe.GameController.get("gameState");switch(a){case Tictactoe.GameState.Playing:return"";case Tictactoe.GameState.Draw:return"Draw! Reload the page to play again.";case Tictactoe.GameState.UserWon:return"What!? You won! Message me on Github and tell me how you did it!";case Tictactoe.GameState.ComputerWon:return"Sorry, you lost. Reload the page to play again."}}.property("content").cacheable(),layout:{centerX:0,width:750,height:50,top:50}});Tictactoe.mainPage=SC.Page.design({mainPane:SC.MainPane.design({childViews:"gameView boardView".w(),gameView:Tictactoe.GameView.create(),boardView:Tictactoe.BoardView.create()})});Tictactoe.main=function main(){Tictactoe.getPath("mainPage.mainPane").append()};function main(){Tictactoe.main()};